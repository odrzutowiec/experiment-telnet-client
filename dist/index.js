!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([function(t,e){t.exports=require("buffer")},function(t,e){t.exports=require("babel-runtime/helpers/inherits")},function(t,e){t.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(t,e){t.exports=require("babel-runtime/helpers/createClass")},function(t,e){t.exports=require("babel-runtime/helpers/classCallCheck")},function(t,e){t.exports=require("stream")},function(t,e){t.exports=require("net")},function(t,e){t.exports=require("events")},function(t,e){t.exports=require("babel-runtime/helpers/asyncToGenerator")},function(t,e){t.exports=require("babel-runtime/regenerator")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Telnet=e.TelnetStream=e.IAC=e.DONT=e.DO=e.WONT=e.WILL=e.SUBBEG=e.SUBEND=e.SUBCMD=e.SUBNEG=e.OPTION=e.COMMAND=void 0;var r=c(n(9)),i=c(n(8)),o=c(n(4)),s=c(n(3)),u=c(n(2)),a=c(n(1));function c(t){return t&&t.__esModule?t:{default:t}}var l=n(7),d=n(6),f=n(5),h=n(0).Buffer,p=e.COMMAND=Symbol(),m=e.OPTION=Symbol(),v=e.SUBNEG=Symbol(),b=e.SUBCMD=Symbol(),y=e.SUBEND=240,S=e.SUBBEG=250,x=e.WILL=251,k=e.WONT=252,g=e.DO=253,O=e.DONT=254,_=e.IAC=255,w=e.TelnetStream=function(t){function e(){(0,o.default)(this,e);var t=(0,u.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.setEncoding("utf8"),t.state=void 0,t.command=void 0,t.option=void 0,t.subcmd=[],t}return(0,a.default)(e,t),(0,s.default)(e,[{key:"_transform",value:function(t,e,n){var r=h.alloc(t.length),i=0,o=!0,s=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var l=a.value,d=this.handle(l);void 0!==d&&(r[i++]=d)}}catch(t){s=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}this.push(r),n()}},{key:"handle",value:function(t){switch(this.state){case p:switch(t){case x:case k:case g:case O:return this.command=t,void(this.state=m);case S:return this.command=S,void(this.state=m);default:return this.emit("command",{command:t}),void(this.state=void 0)}case m:return this.command===S?(this.option=t,void(this.state=v)):(this.emit("command",{command:this.command,option:t}),void(this.state=void 0));case v:switch(t){case _:return void(this.state=b);default:return void this.subcmd.push(t)}case b:switch(t){case _:return this.subcmd.push(_),void(this.state=v);case y:return this.emit("command",{command:this.command,option:this.option,subcmd:this.subcmd}),void(this.state=void 0);default:return console.error("error"),void(this.state=void 0)}case void 0:switch(this.state=void 0,this.command=void 0,this.option=void 0,this.subcmd=[],t){case _:return void(this.state=p);default:return t}}}}]),e}(f.Transform);e.Telnet=function(t){function e(t,n){(0,o.default)(this,e);var r=(0,u.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.socket=new d.Socket,r.out=new w,r.socket.addListener("close",function(t){return r.emit("close",t)}),r.out.addListener("data",function(t){return r.emit("data",t)}),r.out.addListener("command",function(t){return r.emit("command",t)}),r.socket.pipe(r.out),r.socket.connect(t,n),r}return(0,a.default)(e,t),(0,s.default)(e,[{key:"destroy",value:function(){this.socket.destroy()}},{key:"read",value:function(){var t=this;return new Promise(function(e){return t.once("data",function(t){return e(t)})}).catch(function(){return console.log("Failed read")})}},{key:"print",value:function(){var t=(0,i.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=process.stdout,t.next=3,this.read();case 3:t.t1=t.sent,t.t0.write.call(t.t0,t.t1);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"write",value:function(t){var e=this;return t=t instanceof Array?h.from(t):t,new Promise(function(n){return e.socket.write(t,n)}).catch(function(){return console.log("Failed to write: "+t)})}}]),e}(l)},function(t,e){t.exports=require("react-blessed")},function(t,e){t.exports=require("blessed")},function(t,e){t.exports=require("react")},function(t,e){t.exports=require("babel-runtime/helpers/toConsumableArray")},function(t,e){t.exports=require("babel-runtime/helpers/slicedToArray")},function(t,e,n){"use strict";var r=p(n(15)),i=p(n(14)),o=p(n(4)),s=p(n(3)),u=p(n(2)),a=p(n(1)),c=n(13),l=p(c),d=p(n(12)),f=n(11),h=(n(0),n(10));function p(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(t){(0,o.default)(this,e);var n=(0,u.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={input:"",output:[],history:[],pointer:void 0},t.screen.on("keypress",n.onInput.bind(n)),t.telnet.on("data",n.onOutput.bind(n)),n}return(0,a.default)(e,t),(0,s.default)(e,[{key:"onInput",value:function(t,e){var n=this;switch(e.full){case"C-l":this.setState({output:[]});case"C-x":this.setState({pointer:void 0,input:""});break;case"up":if(0===this.state.history.length)break;if(void 0===this.state.pointer){this.setState({pointer:this.state.history.length-1,input:this.state.history[this.state.history.length-1]});break}var r=Math.max(this.state.pointer-1,0);this.setState({pointer:r,input:this.state.history[r]});break;case"down":if(0===this.state.history.length)break;if(void 0===this.state.pointer){this.setState({pointer:0,input:this.state.history[0]});break}var o=Math.min(this.state.pointer+1,this.state.history.length-1);this.setState({pointer:o,input:this.state.history[o]});break;case"backspace":this.setState(function(t){return{input:t.input.substring(0,t.input.length-1),pointer:void 0}});break;case"return":this.state.input.length>0&&(this.props.telnet.write(this.state.input+"\n"),this.setState(function(t){return{input:"",output:[].concat((0,i.default)(t.output),[n.state.input+"\n"]),history:[].concat((0,i.default)(t.history),[n.state.input]),pointer:void 0}}));break;default:this.setState(function(e){return{input:e.input+t,pointer:void 0}})}}},{key:"onOutput",value:function(t){var e=this;this.setState(function(e){return{output:[].concat((0,i.default)(e.output),[t])}},function(){e.refs.box.setScrollPerc(100)})}},{key:"render",value:function(){var t=this.state.history.length,e=void 0!==this.state.pointer?this.state.pointer+1+"/"+t+") ":"",n=this.state.output.join("").replace(/[\r]/g,""),r=""+e+this.state.input;return l.default.createElement("box",{width:"100%",height:"100%",style:{fg:"#3d2516"},ch:"/"},l.default.createElement("box",{ref:"box",scrollable:!0,mouse:!0,top:0,left:"center",width:"100%",height:"100%",content:""+n+r}))}}]),e}(c.Component),v=process.argv.slice(2),b=(0,r.default)(v,2),y=b[0],S=b[1],x=new h.Telnet(S||23,y);x.on("close",function(){console.log("\nBye now!"),process.exit()});var k=d.default.screen({smartCSR:!0,terminal:"xterm-256color",fullUnicode:!0});k.key(["C-c"],function(t,e){process.exit()}),(0,f.render)(l.default.createElement(m,{screen:k,telnet:x}),k)}]);